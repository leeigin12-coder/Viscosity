<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GlassFlow Pro</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <!-- Chart.js for Viscosity Graph -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <div class="background-glow"></div>

    <div class="glass-container">
        <header>
            <div class="header-row">
                <h1>üî• GlassFlow Pro</h1>
                <button id="reset-btn" class="icon-btn" title="Reset Inputs">‚Ü∫</button>
            </div>
            <p>Hagen-Poiseuille Viscous Flow Model</p>
        </header>

        <!-- Tab Navigation -->
        <div class="tab-nav">
            <button class="tab-btn active" data-tab="flow">Flow Calculator</button>
            <button class="tab-btn" data-tab="viscosity">Viscosity Model</button>
        </div>

        <div class="app-body">
            <!-- Flow Calculator Tab -->
            <main id="tab-flow" class="tab-content active main-panel">
                <!-- Material Section -->
                <section class="input-group">
                    <h2>1. Material (Î¨ºÏÑ±Ïπò)</h2>
                    <div class="control">
                        <label for="material-select">Glass Type</label>
                        <select id="material-select">
                            <option value="soda">ÏÜåÎã§Ï†ÑÏÑù Ïú†Î¶¨ (Soda-Lime)</option>
                            <option value="boro">Î∂ïÍ∑úÏÇ∞ Ïú†Î¶¨ (Borosilicate)</option>
                            <option value="lead">ÎÇ© Ïú†Î¶¨ (Lead Glass)</option>
                            <option value="custom">ÏßÅÏ†ë ÏûÖÎ†• (Custom)</option>
                        </select>
                    </div>
                    <div class="row">
                        <div class="control">
                            <label>Density (kg/m¬≥)</label>
                            <input type="number" id="density" value="2500" disabled>
                        </div>
                        <div class="control">
                            <label>Viscosity (Pa¬∑s)</label>
                            <input type="number" id="viscosity" value="1000" disabled>
                        </div>
                    </div>
                </section>

                <!-- Geometry Section -->
                <section class="input-group">
                    <h2>2. Nozzle Geometry (ÎÖ∏Ï¶ê ÌòïÏÉÅ)</h2>

                    <div class="control">
                        <label>Shape</label>
                        <div class="shape-options">
                            <button class="shape-btn active" data-shape="circle">
                                <span class="icon">‚óè</span> Circular
                            </button>
                            <button class="shape-btn" data-shape="rect">
                                <span class="icon">‚ñ†</span> Rectangular
                            </button>
                            <button class="shape-btn" data-shape="ellipse">
                                <span class="icon">‚¨≠</span> Elliptical
                            </button>
                            <button class="shape-btn" data-shape="annulus">
                                <span class="icon">‚óé</span> Ring
                            </button>
                        </div>
                    </div>

                    <div class="geometry-container">
                        <div class="inputs-col">
                            <!-- Common Length -->
                            <div class="control">
                                <label>Length (mm)</label>
                                <input type="number" id="length" placeholder="50">
                            </div>

                            <!-- Circular Inputs -->
                            <div id="input-circle" class="shape-input">
                                <div class="control">
                                    <label>Diameter (mm)</label>
                                    <input type="number" id="diameter" placeholder="4">
                                </div>
                            </div>

                            <!-- Rectangular Inputs -->
                            <div id="input-rect" class="shape-input hidden">
                                <div class="control">
                                    <label>Width (mm)</label>
                                    <input type="number" id="width" placeholder="10">
                                </div>
                                <div class="control">
                                    <label>Height (mm)</label>
                                    <input type="number" id="height" placeholder="2">
                                </div>
                            </div>

                            <!-- Elliptical Inputs -->
                            <div id="input-ellipse" class="shape-input hidden">
                                <div class="control">
                                    <label>Major Axis (mm)</label>
                                    <input type="number" id="major" placeholder="8">
                                </div>
                                <div class="control">
                                    <label>Minor Axis (mm)</label>
                                    <input type="number" id="minor" placeholder="4">
                                </div>
                            </div>

                            <!-- Annular Inputs -->
                            <div id="input-annulus" class="shape-input hidden">
                                <div class="control">
                                    <label>Outer Dia (mm)</label>
                                    <input type="number" id="outer" placeholder="10">
                                </div>
                                <div class="control">
                                    <label>Inner Dia (mm)</label>
                                    <input type="number" id="inner" placeholder="6">
                                </div>
                            </div>
                        </div>

                        <!-- Visualizer -->
                        <div class="visualizer">
                            <svg id="nozzle-preview" viewBox="0 0 100 100">
                                <!-- Dynamic Shape will be drawn here -->
                                <circle cx="50" cy="50" r="40" fill="none" stroke="var(--accent)" stroke-width="2" />
                            </svg>
                            <span class="vis-label">Preview</span>
                        </div>
                    </div>
                </section>

                <!-- Mode Section -->
                <section class="input-group">
                    <h2>3. Flow Condition (Ïö¥Ï†Ñ Ï°∞Í±¥)</h2>
                    <div class="mode-switch">
                        <button class="mode-btn active" data-mode="gravity">Gravity (Ï§ëÎ†•)</button>
                        <button class="mode-btn" data-mode="pressure">Pressure (Í∞ÄÏïï)</button>
                    </div>

                    <div id="input-gravity" class="control mode-input">
                        <label>Head Height (mm)</label>
                        <input type="number" id="head-height" placeholder="e.g. 100">
                        <span class="unit-hint">ŒîP = œÅgh</span>
                    </div>

                    <div id="input-pressure" class="control mode-input hidden">
                        <label>Pressure (bar)</label>
                        <input type="number" id="pressure-bar" placeholder="e.g. 5">
                        <span class="unit-hint">1 bar = 100,000 Pa</span>
                    </div>
                </section>

                <!-- Result Section -->
                <section class="result-card">
                    <div class="result-item">
                        <span class="label">Flow Rate (Ïú†Îüâ)</span>
                        <span class="value" id="res-flow">0.0000</span>
                        <span class="unit">kg/hr</span>
                    </div>
                    <div class="result-item">
                        <span class="label">Velocity (Ïú†ÏÜç)</span>
                        <span class="value" id="res-velocity">0.0000</span>
                        <span class="unit">m/s</span>
                    </div>
                    <button id="record-btn" class="action-btn">Record Result</button>
                </section>
            </main>

            <!-- Viscosity Calculator Tab -->
            <main id="tab-viscosity" class="tab-content main-panel">
                <section class="input-group">
                    <div class="header-row">
                        <h2>Composition Input</h2>
                        <div class="unit-toggle">
                            <label><input type="radio" name="comp-unit" value="wt" checked> Weight %</label>
                            <label><input type="radio" name="comp-unit" value="mol"> Mol %</label>
                        </div>
                    </div>
                    <div class="comp-grid" id="comp-grid">
                        <!-- Inputs injected by JS -->
                    </div>
                    <div class="row" style="margin-top: 1rem;">
                        <button id="normalize-btn" class="mode-btn">Normalize to 100%</button>
                        <button id="clear-comp-btn" class="mode-btn"
                            style="background: rgba(255, 99, 71, 0.2); border-color: rgba(255, 99, 71, 0.5); color: #ff6b6b;">Clear</button>
                        <div class="total-display">Total: <span id="comp-total">0.00</span>%</div>
                    </div>
                </section>

                <section class="result-card">
                    <h3>Iso-Viscosity Temperatures</h3>
                    <div class="result-grid">
                        <div class="res-item">
                            <span class="lbl">T<sub>w</sub> (ÏûëÏóÖÏ†ê)</span>
                            <span class="val" id="t-1-5">---</span>
                            <span class="lbl sub-lbl">log Œ∑ = 1.5</span>
                        </div>
                        <div class="res-item">
                            <span class="lbl">T<sub>s</sub> (Ïó∞ÌôîÏ†ê)</span>
                            <span class="val" id="t-6-6">---</span>
                            <span class="lbl sub-lbl">log Œ∑ = 6.6</span>
                        </div>
                        <div class="res-item">
                            <span class="lbl">T<sub>g</sub> (Ï†ÑÏù¥)</span>
                            <span class="val" id="t-g">---</span>
                            <span class="lbl sub-lbl">log Œ∑ = 11.3</span>
                        </div>
                        <div class="res-item">
                            <span class="lbl">T<sub>strain</sub> (Î≥ÄÌòïÏ†ê)</span>
                            <span class="val" id="t-strain">---</span>
                            <span class="lbl sub-lbl">log Œ∑ = 14.5</span>
                        </div>
                    </div>

                    <h3 style="margin-top: 1rem;">VFT Parameters</h3>
                    <div class="vft-params" id="vft-params">
                        A: -, B: -, T‚ÇÄ: -
                    </div>
                </section>

                <section class="input-group">
                    <h2>Specific Calculation (ÌäπÏ†ï ÏßÄÏ†ê Í≥ÑÏÇ∞)</h2>
                    <div class="row">
                        <div class="control">
                            <label>Temperature (¬∞C)</label>
                            <input type="number" id="calc-temp-input" placeholder="e.g. 1200">
                        </div>
                        <div class="control">
                            <label>Viscosity</label>
                            <div class="result-with-unit">
                                <input type="text" id="calc-visc-result" readonly placeholder="-">
                                <span class="unit-label">log Pa¬∑s</span>
                            </div>
                        </div>
                        <button id="calc-visc-btn" class="mode-btn active" style="flex:0;">Go</button>
                    </div>
                    <div class="row">
                        <div class="control">
                            <label>Viscosity (log Pa¬∑s)</label>
                            <input type="number" id="calc-log-input" placeholder="e.g. 3.0">
                        </div>
                        <div class="control">
                            <label>Temperature</label>
                            <div class="result-with-unit">
                                <input type="text" id="calc-temp-result" readonly placeholder="-">
                                <span class="unit-label">¬∞C</span>
                            </div>
                        </div>
                        <button id="calc-temp-btn" class="mode-btn active" style="flex:0;">Go</button>
                    </div>
                </section>

                <!-- Chart container -->
                <section class="chart-container">
                    <canvas id="viscosityChart"></canvas>
                </section>

                <button id="record-visc-btn" class="action-btn" style="margin-top: 1rem;">Record Result</button>
            </main>

            <!-- History Section (Shared) -->
            <aside class="side-panel">
                <div class="history-header">
                    <h3>History</h3>
                    <button id="clear-hist-btn" class="clear-btn">Clear</button>
                </div>
                <div class="history-scroll">
                    <ul id="history-list">
                        <!-- Items will be injected here -->
                    </ul>
                    <div id="empty-msg" class="empty-state">No records yet</div>
                </div>
            </aside>
        </div>
    </div>

    <script src="viscosity_model.js"></script>
    <script src="script.js"></script>
</body>

</html>